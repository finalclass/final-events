/*! final-events 2013-09-24 */
!function(a){"undefined"!=typeof a&&(a.dispatcher=require("./dispatcher.js").dispatcher)}("undefined"==typeof exports?this.finalEvents={}:exports),function(a){function b(a,b){return this.hasEventListener(a)||(this["@eventListeners"][a]=[]),this["@eventListeners"][a].push(b),this}function c(a,b){b.once=!0,this.addEventListener(a,b)}function d(a,b){var c=this["@eventListeners"][a];if(!c)return this;var d=c.indexOf(b);return-1!==d&&c.splice(d,1),this}function e(a){return this["@eventListeners"][a]=[],this}function f(a){return void 0!==this["@eventListeners"][a]}function g(a,b){b.hasEventListener(a.type)&&b["@eventListeners"][a.type].forEach(function(c){c.call(b,a),c.once&&b.removeEventListener(a.type,c)})}function h(a,b){for(;b=b.parent;)a.bubble&&g(a,b)}function i(a){return"string"==typeof a&&(a={type:a}),a.target=this,g(a,this),h(a,this),this}var j={"@eventListeners":{value:{}},addEventListener:{value:b},on:{value:b},once:{value:c},removeEventListener:{value:d},off:{value:d},removeEventListeners:{value:e},hasEventListener:{value:f},dispatchEvent:{value:i},trigger:{value:i},emit:{value:i}};a.dispatcher=function(a){a["@eventListeners"]||Object.defineProperties(a,j)}}("undefined"==typeof exports?this.finalEvents={}:exports);