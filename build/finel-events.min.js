/*! final-events 2013-09-24 */
Object.keys||(Object.keys=function(){"use strict";var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}()),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){"use strict";var c,d;if(null==this)throw new TypeError("this is null or not defined");var e,f=Object(this),g=f.length>>>0;if("[object Function]"!=={}.toString.call(a))throw new TypeError(a+" is not a function");for(arguments.length>=2&&(c=b),d=0;g>d;)d in f&&(e=f[d],a.call(c,e,d,f)),d++}),Object.defineProperty||(Object.defineProperty=function(a,b,c){a[b]=c.value}),Object.defineProperties||(Object.defineProperties=function(a,b){Object.keys(b).forEach(function(c){Object.defineProperty(a,c,b[c])})}),function(a){function b(a,b){return this.hasEventListener(a)||(this["@eventListeners"][a]=[]),this["@eventListeners"][a].push(b),this}function c(a,b){b.once=!0,this.addEventListener(a,b)}function d(a,b){var c=this["@eventListeners"][a];if(!c)return this;var d=c.indexOf(b);return-1!==d&&c.splice(d,1),this}function e(a){return this["@eventListeners"][a]=[],this}function f(a){return void 0!==this["@eventListeners"][a]}function g(a,b){b.hasEventListener(a.type)&&b["@eventListeners"][a.type].forEach(function(c){c.call(b,a),c.once&&b.removeEventListener(a.type,c)})}function h(a,b){for(;b=b.parent;)a.bubble&&g(a,b)}function i(a){return"string"==typeof a&&(a={type:a}),a.target=this,g(a,this),h(a,this),this}var j={"@eventListeners":{value:{}},addEventListener:{value:b},on:{value:b},once:{value:c},removeEventListener:{value:d},off:{value:d},removeEventListeners:{value:e},hasEventListener:{value:f},dispatchEvent:{value:i},trigger:{value:i},emit:{value:i}};a.dispatcher=function(a){return a["@eventListeners"]||Object.defineProperties(a,j),a}}("undefined"==typeof exports?this.finalEvents={}:exports);